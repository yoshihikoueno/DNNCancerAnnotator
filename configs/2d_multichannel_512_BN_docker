FROM tensorflow/tensorflow:1.14.0-gpu-py3
RUN DEBIAN_FRONTEND=noninteractive apt-get update
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y git protobuf-compiler python3-pil python3-matplotlib python3-pip
RUN pip install connected-components-3d --no-binary :all:
run git clone --single-branch --branch dev https://github.com/yoshihikoueno/DNNCancerAnnotator
workdir DNNCancerAnnotator
RUN protoc protos/*.proto --python_out=.
CMD python3 -m runs.train\
    --pipeline_config_file configs/2d_multichannel_512_BN.config\
    --result_dir /kw_resources/results/annotation/new_db/imp02/multichannel_512_BN\
    --num_train_steps 200000
