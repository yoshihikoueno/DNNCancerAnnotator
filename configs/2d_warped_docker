FROM tensorflow/tensorflow:1.13.1-gpu-py3

RUN apt-get update && apt-get install -y git protobuf-compiler python3-pil python3-matplotlib python3-pip

RUN pip install connected-components-3d --no-binary :all:

RUN git clone https://github.com/P-Hidringer/NetNextGen

WORKDIR NetNextGen

RUN protoc protos/*.proto --python_out=.

#CMD python3 train.py --pipeline_config_file /kw_resources/configs/2d_warped.config --result_dir \
#    /kw_resources/results/2d/2d_warped --num_train_steps 150000
CMD python3 eval.py --checkpoint_dir /kw_resources/results/2d/2d_warped --all_checkpoints --use_gpu --split_name val --eval_checkpoint_step_interval 3000 --eval_name normalized